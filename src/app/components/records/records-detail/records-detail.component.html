<div id="records-detail-container">

    <div id="patient-data">
        <div id="patient-data-header">
            <div id="patient-portrait"><img src="../../../../assets/images/portrait-patient.png"></div>
        </div>
        <div id="patient-data-body">
            <div id="patient-data-first-line">
            <div id="patient-name">{{patient?.paciente.name}}</div>
            <div *ngIf="!userPatient" class="event-button"><button (click)="editPatient(patient.paciente.id)">Atualizar cadastro</button></div>
            </div>
            <h4 *ngIf="patient.paciente.insuranceCompany">Convênio</h4>
            <h4 *ngIf="!patient.paciente.insuranceCompany">Convênio</h4>
            <p *ngIf="patient.paciente.insuranceCompany">{{patient.insuranceCompany}}</p>
            <p *ngIf="!patient.paciente.insuranceCompany">Não possui</p>
            <h4>Contato</h4>
            <p>{{patient.paciente.phone}}</p>
            <h4>CPF:</h4>
            <p>{{patient.paciente.cpf}}</p>
            <h4>Data de nascimento:</h4>
            <p>{{patient.paciente.birthDate | dateFormatterIn}}</p>


            <h4>Contato de emergência</h4>
            <p>{{patient.paciente.emergencyContact}}</p>
            <h4 *ngIf="patient.paciente.allergies">Lista de alergias</h4>
            <p *ngIf="patient.paciente.allergies">{{patient.allergies}}</p>
            <h4 *ngIf="patient.paciente.specialCare">Lista de cuidados específicos</h4>
            <h4 *ngIf="!patient.paciente.specialCare">Lista de cuidados específicos</h4>
            <p *ngIf="patient.paciente.specialCare">{{patient.specialCare}}</p>
            <p *ngIf="!patient.paciente.specialCare">{{patient.specialCare}}Não possui</p>
        </div>
    </div>

    <div id="events-container">

        <div class="patient-event" *ngFor="let event of patientEvents">
            <div class="event-consultation" *ngIf="event.reason">
                <div class="event-header">
                    <div>
                        <h3>Consulta</h3>
                    </div>
                    <div class="event-header-secondrow">
                        <div class="header-unit">
                            <fa-icon [icon]="faStethoscope"></fa-icon>
                            <h2>{{event.reason}}</h2>
                        </div>
                        <div class="event-header-datetime">
                            <div class="header-unit">
                                <fa-icon [icon]="faCalendarDay"></fa-icon>
                                <h2>{{event.date | date: "dd/MM/YYYY"}}</h2>
                            </div>
                            <div class="header-unit">
                                <div><fa-icon [icon]="faClock"></fa-icon></div>
                                <div>
                                    <h2>{{event.time}}</h2>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="event-body">
                    <h4>Descrição do problema </h4>
                    <p>{{event.issueDescription}}</p>

                    <h4>Medicação Receitada </h4>
                    <p>{{event.prescribedMedication}}</p>

                    <h4>Dosagem e Precauções </h4>
                    <p>{{event.dosagePrecautions}}</p>
                </div>
                <div class="event-button">
                    <button *ngIf="!userPatient" (click)="editConsultation(event.id)">Editar</button>
                </div>
            </div>

            <div class="event-exam" *ngIf="event.tipo">
                <div class="event-header">
                    <div>
                        <h3>Exame</h3>
                    </div>
                    <div class="event-header-secondrow">
                        <div class="header-unit">
                            <fa-icon [icon]="faMicroscope"></fa-icon>
                            <h2>{{event.nome}}</h2>
                        </div>
                        <div class="event-header-datetime">
                            <div class="header-unit">
                                <fa-icon [icon]="faCalendarDay"></fa-icon>
                                <h2>{{event.dataExame | date: "dd/MM/YYYY"}}</h2>
                            </div>
                            <div class="header-unit">
                                <div><fa-icon [icon]="faClock"></fa-icon></div>
                                <div>
                                    <h2>{{event.horaExame}}</h2>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="event-body">
                    <div class="event-body-firstrow">
                        <div class="exam-lab">
                            <h4>Laboratório </h4>
                            <p>{{event.laboratorio}}</p>
                        </div>
                        <div class="exam-type">
                            <h4>Tipo </h4>
                            <p>{{event.tipo}}</p>
                        </div>
                    </div>
                    <h4 *ngIf="event.url">Anexo</h4>
                    <a *ngIf="event.url" class="attachment" href="{{event.documentUrl}}"
                        target="_blank"><fa-icon [icon]="faPaperclip"></fa-icon></a>
                    <h4>Resultados </h4>
                    <p>{{event.resultados}}</p>
                </div>
                <div class="event-button">
                    <button *ngIf="!userPatient" (click)="editExam(event.id)">Editar</button>
                </div>
            </div>
        </div>


    </div>


</div>